package com.diskin.alon.movieguide.news.data

import com.diskin.alon.movieguide.news.data.local.Bookmark
import com.diskin.alon.movieguide.news.data.remote.FeedlyEntryResponse
import com.diskin.alon.movieguide.news.data.remote.FeedlyFeedResponse
import com.diskin.alon.movieguide.news.data.remote.FeedlyFeedResponse.FeedEntry
import com.diskin.alon.movieguide.news.data.remote.FeedlyFeedResponse.Visual
import com.diskin.alon.movieguide.news.domain.ArticleEntity
import com.google.gson.Gson
import java.io.File

fun getFeedlyFeedJsonResponse(): String {
    return "{\"id\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"alternate\":[{\"href\":\"https://collider.com\",\"type\":\"text/html\"}],\"direction\":\"ltr\",\"updated\":1600669488923,\"continuation\":\"174ae667cce:5906dc:70edfa5f\",\"items\":[{\"id\":\"uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174af56171b:70b9d4:70edfa5f\",\"keywords\":[\"Entertainment\",\"Reviews\",\"TV\",\"2020 Emmy Awards\",\"Emmys\",\"Jimmy Kimmel\",\"Review\"],\"originId\":\"https://collider.com/?p=930281\",\"fingerprint\":\"760d54e5\",\"language\":\"en\",\"title\":\"Look, the Emmy Awards Were Not the Worst Thing to Happen in 2020\",\"crawled\":1600669488923,\"author\":\"Liz Shannon Miller\",\"origin\":{\"streamId\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"htmlUrl\":\"https://collider.com\"},\"summary\":{\"content\":\"Getting mad at an awards show is like getting mad at a cat. Admittedly, as a rule, awards shows are a lot less cute and fuzzy than cats, but an awards show is what it is, is going to do what it's going to do, and no matter how much you yell at them, it's unlikely you'll ever see much change in their behavior. This remains true even during a pandemic, this year's Emmy Awards ceremony reveals, which were unlike any ceremony in television history but still featured some awkward gags, some funny ones, some blatant …\",\"direction\":\"ltr\"},\"enclosure\":[{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg\",\"type\":\"image/jpg\",\"length\":500000},{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg\",\"width\":600,\"height\":200,\"type\":\"image/jpeg\"}],\"alternate\":[{\"href\":\"https://collider.com/emmy-awards-2020-review/\",\"type\":\"text/html\"}],\"published\":1600668838000,\"visual\":{\"url\":\"https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg\",\"width\":600,\"height\":200,\"processor\":\"feedly-nikon-v3.1\",\"contentType\":\"image/jpeg\"},\"canonicalUrl\":\"https://collider.com/emmy-awards-2020-review/\",\"unread\":true},{\"id\":\"uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae736ce2:5a2bb4:70edfa5f\",\"keywords\":[\"Entertainment\",\"Reviews\",\"TV\",\"documentary\",\"docuseries\",\"Love Fraud\",\"Miniseries\",\"Review\",\"Showtime\",\"True Crime\"],\"originId\":\"https://collider.com/?p=925448\",\"fingerprint\":\"f8c8dd10\",\"recrawled\":1600656760707,\"updateCount\":1,\"language\":\"en\",\"title\":\"‘Love Fraud’ Spoiler Review: A Relentlessly Watchable, Relentlessly Triggering True Crime Saga\",\"crawled\":1600654634210,\"author\":\"Gregory Lawrence\",\"origin\":{\"streamId\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"htmlUrl\":\"https://collider.com\"},\"summary\":{\"content\":\"…\",\"direction\":\"ltr\"},\"enclosure\":[{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg\",\"type\":\"image/jpg\",\"length\":500000},{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg\",\"width\":600,\"height\":200,\"type\":\"image/jpeg\"}],\"alternate\":[{\"href\":\"https://collider.com/love-fraud-showtime-spoiler-review/\",\"type\":\"text/html\"}],\"published\":1600653617000,\"visual\":{\"url\":\"https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg\",\"width\":600,\"height\":200,\"processor\":\"feedly-nikon-v3.1\",\"contentType\":\"image/jpeg\"},\"canonicalUrl\":\"https://collider.com/love-fraud-showtime-spoiler-review/\",\"unread\":true},{\"id\":\"uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae667cce:5906dc:70edfa5f\",\"keywords\":[\"Entertainment\",\"News\",\"TV\",\"Disney\",\"Disney Plus\",\"Marvel\",\"MCU\",\"Poster\",\"WandaVision\"],\"originId\":\"http://collider.com/?p=930238\",\"fingerprint\":\"d67b8d30\",\"language\":\"en\",\"title\":\"‘WandaVision’ Poster & New Images Reunite Scarlet Witch and Vision\",\"crawled\":1600653786318,\"author\":\"Haleigh Foutch\",\"origin\":{\"streamId\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"htmlUrl\":\"https://collider.com\"},\"summary\":{\"content\":\"Disney+ debuted the first full trailer for WandaVision during the 72nd Annual Emmy Awards tonight, but that wasn't all! We've also got a new poster and a handful of new photos to parse through and theorize over until the series arrives on streaming later this year. created by Jac Schaeffer (who has written on both Captain Marvel and the long-delayed Black Widow), WandaVision brings back fan-favorite Avengers Wanda Maximoff, aka Scarlet Witch (Elizabeth Olsen) and Vision (Paul Bettany) for a trippy new take on the MCU that poses plenty of mysteries. How is Vision back? What …\",\"direction\":\"ltr\"},\"enclosure\":[{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg\",\"type\":\"image/jpg\",\"length\":500000},{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg\",\"width\":600,\"height\":200,\"type\":\"image/jpeg\"}],\"alternate\":[{\"href\":\"https://collider.com/wandavision-poster-images-scarlet-witch-vision/\",\"type\":\"text/html\"}],\"published\":1600653228000,\"visual\":{\"url\":\"https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg\",\"width\":600,\"height\":200,\"processor\":\"feedly-nikon-v3.1\",\"contentType\":\"image/jpeg\"},\"canonicalUrl\":\"https://collider.com/wandavision-poster-images-scarlet-witch-vision/\",\"unread\":true,\"engagement\":4,\"engagementRate\":0.02}]}"
}

fun getFeedlyFeedLastPageJsonResponse(): String {
    return "{\"id\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"alternate\":[{\"href\":\"https://collider.com\",\"type\":\"text/html\"}],\"direction\":\"ltr\",\"updated\":1600669488923,\"items\":[{\"id\":\"uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174af56171b:70b9d4:70edfa5f\",\"keywords\":[\"Entertainment\",\"Reviews\",\"TV\",\"2020 Emmy Awards\",\"Emmys\",\"Jimmy Kimmel\",\"Review\"],\"originId\":\"https://collider.com/?p=930281\",\"fingerprint\":\"760d54e5\",\"language\":\"en\",\"title\":\"Look, the Emmy Awards Were Not the Worst Thing to Happen in 2020\",\"crawled\":1600669488923,\"author\":\"Liz Shannon Miller\",\"origin\":{\"streamId\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"htmlUrl\":\"https://collider.com\"},\"summary\":{\"content\":\"Getting mad at an awards show is like getting mad at a cat. Admittedly, as a rule, awards shows are a lot less cute and fuzzy than cats, but an awards show is what it is, is going to do what it's going to do, and no matter how much you yell at them, it's unlikely you'll ever see much change in their behavior. This remains true even during a pandemic, this year's Emmy Awards ceremony reveals, which were unlike any ceremony in television history but still featured some awkward gags, some funny ones, some blatant …\",\"direction\":\"ltr\"},\"enclosure\":[{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg\",\"type\":\"image/jpg\",\"length\":500000},{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg\",\"width\":600,\"height\":200,\"type\":\"image/jpeg\"}],\"alternate\":[{\"href\":\"https://collider.com/emmy-awards-2020-review/\",\"type\":\"text/html\"}],\"published\":1600668838000,\"visual\":{\"url\":\"https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg\",\"width\":600,\"height\":200,\"processor\":\"feedly-nikon-v3.1\",\"contentType\":\"image/jpeg\"},\"canonicalUrl\":\"https://collider.com/emmy-awards-2020-review/\",\"unread\":true},{\"id\":\"uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae736ce2:5a2bb4:70edfa5f\",\"keywords\":[\"Entertainment\",\"Reviews\",\"TV\",\"documentary\",\"docuseries\",\"Love Fraud\",\"Miniseries\",\"Review\",\"Showtime\",\"True Crime\"],\"originId\":\"https://collider.com/?p=925448\",\"fingerprint\":\"f8c8dd10\",\"recrawled\":1600656760707,\"updateCount\":1,\"language\":\"en\",\"title\":\"‘Love Fraud’ Spoiler Review: A Relentlessly Watchable, Relentlessly Triggering True Crime Saga\",\"crawled\":1600654634210,\"author\":\"Gregory Lawrence\",\"origin\":{\"streamId\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"htmlUrl\":\"https://collider.com\"},\"summary\":{\"content\":\"…\",\"direction\":\"ltr\"},\"enclosure\":[{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg\",\"type\":\"image/jpg\",\"length\":500000},{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg\",\"width\":600,\"height\":200,\"type\":\"image/jpeg\"}],\"alternate\":[{\"href\":\"https://collider.com/love-fraud-showtime-spoiler-review/\",\"type\":\"text/html\"}],\"published\":1600653617000,\"visual\":{\"url\":\"https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg\",\"width\":600,\"height\":200,\"processor\":\"feedly-nikon-v3.1\",\"contentType\":\"image/jpeg\"},\"canonicalUrl\":\"https://collider.com/love-fraud-showtime-spoiler-review/\",\"unread\":true},{\"id\":\"uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae667cce:5906dc:70edfa5f\",\"keywords\":[\"Entertainment\",\"News\",\"TV\",\"Disney\",\"Disney Plus\",\"Marvel\",\"MCU\",\"Poster\",\"WandaVision\"],\"originId\":\"http://collider.com/?p=930238\",\"fingerprint\":\"d67b8d30\",\"language\":\"en\",\"title\":\"‘WandaVision’ Poster & New Images Reunite Scarlet Witch and Vision\",\"crawled\":1600653786318,\"author\":\"Haleigh Foutch\",\"origin\":{\"streamId\":\"feed/http://www.collider.com/rss.asp\",\"title\":\"Collider\",\"htmlUrl\":\"https://collider.com\"},\"summary\":{\"content\":\"Disney+ debuted the first full trailer for WandaVision during the 72nd Annual Emmy Awards tonight, but that wasn't all! We've also got a new poster and a handful of new photos to parse through and theorize over until the series arrives on streaming later this year. created by Jac Schaeffer (who has written on both Captain Marvel and the long-delayed Black Widow), WandaVision brings back fan-favorite Avengers Wanda Maximoff, aka Scarlet Witch (Elizabeth Olsen) and Vision (Paul Bettany) for a trippy new take on the MCU that poses plenty of mysteries. How is Vision back? What …\",\"direction\":\"ltr\"},\"enclosure\":[{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg\",\"type\":\"image/jpg\",\"length\":500000},{\"href\":\"https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg\",\"width\":600,\"height\":200,\"type\":\"image/jpeg\"}],\"alternate\":[{\"href\":\"https://collider.com/wandavision-poster-images-scarlet-witch-vision/\",\"type\":\"text/html\"}],\"published\":1600653228000,\"visual\":{\"url\":\"https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg\",\"width\":600,\"height\":200,\"processor\":\"feedly-nikon-v3.1\",\"contentType\":\"image/jpeg\"},\"canonicalUrl\":\"https://collider.com/wandavision-poster-images-scarlet-witch-vision/\",\"unread\":true,\"engagement\":4,\"engagementRate\":0.02}]}"
}

fun getJsonFromResource(resource: String): String {
    val topLevelClass = object : Any() {}.javaClass.enclosingClass!!
    val jsonResource = topLevelClass.classLoader!! // javaClass.classLoader
        .getResource(resource)

    return File(jsonResource.toURI()).readText()
}

fun parseFeedlyEntryResponseFromJson(json: String): List<FeedlyEntryResponse> {
    val gson = Gson()
    return gson.fromJson(json,Array<FeedlyEntryResponse>::class.java)!!.toList()
}

fun getMappedFeedlyResponse(): FeedlyFeedResponse {
    val continuation = "174ae667cce:5906dc:70edfa5f"
    val entries = listOf(
        FeedEntry(
            "uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174af56171b:70b9d4:70edfa5f",
            "Look, the Emmy Awards Were Not the Worst Thing to Happen in 2020",
            1600668838000L,
            Visual(
                "https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg"
            ),
            "https://collider.com/?p=930281"
        ),
        FeedEntry(
            "uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae736ce2:5a2bb4:70edfa5f",
            "‘Love Fraud’ Spoiler Review: A Relentlessly Watchable, Relentlessly Triggering True Crime Saga",
            1600653617000L,
            Visual(
                "https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg"
            ),
            "https://collider.com/?p=925448"
        ),
        FeedEntry(
            "uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae667cce:5906dc:70edfa5f",
            "‘WandaVision’ Poster & New Images Reunite Scarlet Witch and Vision",
            1600653228000L,
            Visual(
                "https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg"
            ),
            "http://collider.com/?p=930238"
        )
    )

    return FeedlyFeedResponse(entries, continuation)
}

fun getMappedFeedlyLastPageResponse(): FeedlyFeedResponse {
    val entries = listOf(
        FeedEntry(
            "uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174af56171b:70b9d4:70edfa5f",
            "Look, the Emmy Awards Were Not the Worst Thing to Happen in 2020",
            1600668838000L,
            Visual(
                "https://cdn.collider.com/wp-content/uploads/2020/09/emmy-awards-2020-bryan-cranston.jpg"
            ),
            "https://collider.com/?p=930281"
        ),
        FeedEntry(
            "uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae736ce2:5a2bb4:70edfa5f",
            "‘Love Fraud’ Spoiler Review: A Relentlessly Watchable, Relentlessly Triggering True Crime Saga",
            1600653617000L,
            Visual(
                "https://cdn.collider.com/wp-content/uploads/2020/09/love-fraud-slice.jpg"
            ),
            "https://collider.com/?p=925448"
        ),
        FeedEntry(
            "uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174ae667cce:5906dc:70edfa5f",
            "‘WandaVision’ Poster & New Images Reunite Scarlet Witch and Vision",
            1600653228000L,
            Visual(
                "https://cdn.collider.com/wp-content/uploads/2020/09/wandavision-poster-slice.jpg"
            ),
            "http://collider.com/?p=930238"
        )
    )

    return FeedlyFeedResponse(entries, null)
}

fun createApiEntryResponse(): List<FeedlyEntryResponse> {
    return listOf(
        FeedlyEntryResponse(
            "id",
            "title",
            "author",
            100L,
            FeedlyEntryResponse.Visual("url"),
            "originId",
            FeedlyEntryResponse.Summary("content")
        )
    )
}

fun getArticleEntity(entry: FeedlyEntryResponse): ArticleEntity {
    return ArticleEntity(
        entry.id,
        entry.title,
        entry.summary.content,
        entry.author,
        entry.published,
        entry.visual?.url ?: "",
        entry.originId
    )
}

fun createIllegalPathId(): String {
    return "uM+MqpK9duOyb/imN0cFmOAhKFCAsXozhxb+qTAQU1w=_174af56171b:70b9d4:70edfa5f"
}

fun createLocalHeadlines(): Array<Bookmark> {
    return arrayOf(
        Bookmark("article_id_1","title1",120L,"umg_url1","articleUrl1"),
        Bookmark("article_id_2","title2",120L,"umg_url2","articleUrl2"),
        Bookmark("article_id_3","title3",120L,"umg_url3","articleUrl3")
    )
}